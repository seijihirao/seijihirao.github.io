'use strict';const gulp=require('gulp'),sourcemaps=require('gulp-sourcemaps'),buffer=require('vinyl-buffer'),rename=require('gulp-rename'),rollup=require('rollup-stream'),source=require('vinyl-source-stream'),del=require('del'),bower=require('bower'),runseq=require('run-sequence'),closure=require('google-closure-compiler').gulp(),babel=require('rollup-plugin-babel');function debugify(a,b,c){b||(b=a);const d={entry:`./entrypoints/${a}-index.js`,format:'iife',moduleName:'webcomponentsjs'};return Object.assign(d,c),rollup(d).pipe(source(`${a}-index.js`),'entrypoints').pipe(rename(b+'.js')).pipe(gulp.dest('./'))}function closurify(a,b){b||(b=a);const c={new_type_inf:!0,compilation_level:'ADVANCED',language_in:'ES6_STRICT',language_out:'ES5_STRICT',output_wrapper:'(function(){\n%output%\n}).call(self)',assume_function_wrapper:!0,js_output_file:`${b}.js`,warning_level:'VERBOSE',rewrite_polyfills:!1,externs:['externs/webcomponents.js','bower_components/custom-elements/externs/custom-elements.js','bower_components/html-imports/externs/html-imports.js','bower_components/shadycss/externs/shadycss-externs.js','bower_components/shadydom/externs/shadydom.js']},d={entry:`entrypoints/${a}-index.js`,format:'iife',moduleName:'webcomponents',sourceMap:!0,context:'window'};return rollup(d).pipe(source(`${a}-index.js`,'entrypoints')).pipe(buffer()).pipe(sourcemaps.init({loadMaps:!0})).pipe(closure(c)).pipe(sourcemaps.write('.')).pipe(gulp.dest('.'))}gulp.task('debugify-hi',()=>{return debugify('webcomponents-hi')}),gulp.task('debugify-hi-ce',()=>{return debugify('webcomponents-hi-ce')}),gulp.task('debugify-hi-sd-ce',()=>{return debugify('webcomponents-hi-sd-ce')}),gulp.task('debugify-hi-sd-ce-pf',()=>{return debugify('webcomponents-hi-sd-ce-pf','webcomponents-lite',{context:'window'})}),gulp.task('debugify-sd-ce',()=>{return debugify('webcomponents-sd-ce')}),gulp.task('closurify-hi',()=>{return closurify('webcomponents-hi')}),gulp.task('closurify-hi-ce',()=>{return closurify('webcomponents-hi-ce')}),gulp.task('closurify-hi-sd-ce',()=>{return closurify('webcomponents-hi-sd-ce')}),gulp.task('closurify-hi-sd-ce-pf',()=>{return closurify('webcomponents-hi-sd-ce-pf','webcomponents-lite')}),gulp.task('closurify-sd-ce',()=>{return closurify('webcomponents-sd-ce')});function singleLicenseComment(){let a=!1;return(b)=>{return!a&&(a=/@license/.test(b))}}const babelOptions={presets:'babili',shouldPrintComment:singleLicenseComment()};gulp.task('debugify-ce-es5-adapter',()=>{return debugify('custom-elements-es5-adapter','',{plugins:[babel(babelOptions)]})}),gulp.task('refresh-bower',()=>{return del('bower_components').then(()=>{let a,b,c=new Promise((c,d)=>{a=c,b=d});return bower.commands.install().on('end',()=>a()).on('error',(a)=>b(a)),c})}),gulp.task('default',(a)=>{runseq('refresh-bower','closure',a)}),gulp.task('clean-builds',()=>{return del(['custom-elements-es5-adapter.js{,.map}','webcomponents*.js{,.map}','!webcomponents-loader.js'])}),gulp.task('debug',(a)=>{runseq('clean-builds',['debugify-hi','debugify-hi-ce','debugify-hi-sd-ce','debugify-hi-sd-ce-pf','debugify-sd-ce','debugify-ce-es5-adapter'],a)}),gulp.task('closure',(a)=>{runseq('clean-builds',...['closurify-hi','closurify-hi-ce','closurify-hi-sd-ce','closurify-hi-sd-ce-pf','closurify-sd-ce','debugify-ce-es5-adapter'],a)});